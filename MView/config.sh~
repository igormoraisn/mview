#!/bin/bash

install_pbrt(){
    git clone https://github.com/mmp/pbrt-v2.git
    cd pbrt-v2/src
    make
}

path=$(pwd)

echo "Starting MView setup"

echo "Search for dependences"

# pbrt verification
if [ -e $path/pbrt-v2 ]; then
    echo "Pbrt version 2 already installed!"
else
    echo "Installing pbrt..."
    install_pbrt()
    echo "Pbrt was successful installed!"
    cd $path

# merl database verification
if [ -e $path/Materials ]; then
    echo "Merl database exists!"
else
    mkdir Materials
    echo "Please download merl database in:"
    echo "http://people.csail.mit.edu/wojciech/BRDFDatabase/"
    echo "Since the brdfs has been downloaded, put the files into Materials directory"

# creating necessary directories
mkdir New


# build all the stuff
echo "Generating some libraries"
gcc -fPIC -o libbin.o -c BRDFWritebin.c
gcc -shared -o libbin.so libbin.o

